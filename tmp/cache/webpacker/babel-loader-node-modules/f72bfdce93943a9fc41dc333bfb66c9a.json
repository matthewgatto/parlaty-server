{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nvar _marked =\n/*#__PURE__*/\n_regeneratorRuntime.mark(createStepSaga),\n    _marked2 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(procedureSagas);\n\nimport { takeEvery, put, call, select } from 'redux-saga/effects';\nimport { setFormErrors } from '../store/form';\nimport { ADD_STEP_REQUEST, ADD_STEP_REQUEST__SUCCESS, ADD_STEP_REQUEST__FAILURE } from '../store/procedure';\nimport { addImage } from '../store/image';\n\nvar getFormValues = function getFormValues(_ref) {\n  var form = _ref.form;\n  return form;\n};\n\nfunction createStepSaga(_ref2) {\n  var payload, _ref3, step, reader, that;\n\n  return _regeneratorRuntime.wrap(function createStepSaga$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          payload = _ref2.payload;\n          _context2.prev = 1;\n          _context2.next = 4;\n          return select(getFormValues);\n\n        case 4:\n          _ref3 = _context2.sent;\n          step = _ref3.step;\n          console.log(\"step\", step);\n\n          if (step.values.title) {\n            _context2.next = 12;\n            break;\n          }\n\n          _context2.next = 10;\n          return put(setFormErrors({\n            form: 'step',\n            inputErrors: {\n              title: true\n            }\n          }));\n\n        case 10:\n          _context2.next = 15;\n          break;\n\n        case 12:\n          _context2.next = 14;\n          return put({\n            type: ADD_STEP_REQUEST__SUCCESS,\n            payload: {\n              step: step.values\n            }\n          });\n\n        case 14:\n          if (step.values.image) {\n            reader = new FileReader();\n            that = this;\n            reader.addEventListener(\"load\",\n            /*#__PURE__*/\n            _regeneratorRuntime.mark(function _callee() {\n              return _regeneratorRuntime.wrap(function _callee$(_context) {\n                while (1) {\n                  switch (_context.prev = _context.next) {\n                    case 0:\n                      _context.next = 2;\n                      return put(addImage(reader.result));\n\n                    case 2:\n                    case \"end\":\n                      return _context.stop();\n                  }\n                }\n              }, _callee);\n            }), false);\n            reader.readAsDataURL(step.values.image);\n          }\n\n        case 15:\n          _context2.next = 20;\n          break;\n\n        case 17:\n          _context2.prev = 17;\n          _context2.t0 = _context2[\"catch\"](1);\n          console.log(\"ERROR\", _context2.t0);\n\n        case 20:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked, this, [[1, 17]]);\n}\n\nexport default function procedureSagas() {\n  return _regeneratorRuntime.wrap(function procedureSagas$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.next = 2;\n          return takeEvery(ADD_STEP_REQUEST, createStepSaga);\n\n        case 2:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked2);\n}","map":{"version":3,"sources":["C:\\Users\\Jake\\Documents\\Repositories\\parlaty\\app\\javascript\\src\\sagas\\procedure.js"],"names":["createStepSaga","procedureSagas","takeEvery","put","call","select","setFormErrors","ADD_STEP_REQUEST","ADD_STEP_REQUEST__SUCCESS","ADD_STEP_REQUEST__FAILURE","addImage","getFormValues","form","payload","step","console","log","values","title","inputErrors","type","image","reader","FileReader","that","addEventListener","result","readAsDataURL"],"mappings":";;;;yBAWUA,c;;;yBAsBeC,c;;AAjCzB,SAASC,SAAT,EAAoBC,GAApB,EAAyBC,IAAzB,EAA+BC,MAA/B,QAA6C,oBAA7C;AACA,SAASC,aAAT,QAA8B,eAA9B;AACA,SACEC,gBADF,EAEEC,yBAFF,EAGEC,yBAHF,QAIO,oBAJP;AAKA,SAASC,QAAT,QAAyB,gBAAzB;;AAEA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB;AAAA,MAAEC,IAAF,QAAEA,IAAF;AAAA,SAAYA,IAAZ;AAAA,CAAtB;;AAEA,SAAUZ,cAAV;AAAA;;AAAA;AAAA;AAAA;AAAA;AAA0Ba,UAAAA,OAA1B,SAA0BA,OAA1B;AAAA;AAAA;AAEmB,iBAAMR,MAAM,CAACM,aAAD,CAAZ;;AAFnB;AAAA;AAEUG,UAAAA,IAFV,SAEUA,IAFV;AAGIC,UAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBF,IAApB;;AAHJ,cAIQA,IAAI,CAACG,MAAL,CAAYC,KAJpB;AAAA;AAAA;AAAA;;AAAA;AAKM,iBAAMf,GAAG,CAACG,aAAa,CAAC;AAACM,YAAAA,IAAI,EAAE,MAAP;AAAeO,YAAAA,WAAW,EAAE;AAACD,cAAAA,KAAK,EAAE;AAAR;AAA5B,WAAD,CAAd,CAAT;;AALN;AAAA;AAAA;;AAAA;AAAA;AAOM,iBAAMf,GAAG,CAAC;AAACiB,YAAAA,IAAI,EAAEZ,yBAAP;AAAkCK,YAAAA,OAAO,EAAE;AAACC,cAAAA,IAAI,EAAEA,IAAI,CAACG;AAAZ;AAA3C,WAAD,CAAT;;AAPN;AAQM,cAAGH,IAAI,CAACG,MAAL,CAAYI,KAAf,EAAqB;AACfC,YAAAA,MADe,GACL,IAAIC,UAAJ,EADK;AAEfC,YAAAA,IAFe,GAER,IAFQ;AAGnBF,YAAAA,MAAM,CAACG,gBAAP,CAAwB,MAAxB;AAAA;AAAA,qCAAgC;AAAA;AAAA;AAAA;AAAA;AAAA;AAC9B,6BAAMtB,GAAG,CAACO,QAAQ,CAACY,MAAM,CAACI,MAAR,CAAT,CAAT;;AAD8B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAhC,GAEG,KAFH;AAGAJ,YAAAA,MAAM,CAACK,aAAP,CAAqBb,IAAI,CAACG,MAAL,CAAYI,KAAjC;AACD;;AAfP;AAAA;AAAA;;AAAA;AAAA;AAAA;AAmBIN,UAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;;AAnBJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAsBA,eAAe,SAAUf,cAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AACb,iBAAMC,SAAS,CAACK,gBAAD,EAAmBP,cAAnB,CAAf;;AADa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA","sourcesContent":["import { takeEvery, put, call, select } from 'redux-saga/effects';\r\nimport { setFormErrors } from '../store/form';\r\nimport {\r\n  ADD_STEP_REQUEST,\r\n  ADD_STEP_REQUEST__SUCCESS,\r\n  ADD_STEP_REQUEST__FAILURE\r\n} from '../store/procedure';\r\nimport { addImage } from '../store/image';\r\n\r\nconst getFormValues = ({form}) => form\r\n\r\nfunction* createStepSaga({payload}){\r\n  try {\r\n    let { step } = yield select(getFormValues);\r\n    console.log(\"step\", step);\r\n    if(!step.values.title){\r\n      yield put(setFormErrors({form: 'step', inputErrors: {title: true}}))\r\n    } else {\r\n      yield put({type: ADD_STEP_REQUEST__SUCCESS, payload: {step: step.values}})\r\n      if(step.values.image){\r\n        var reader  = new FileReader();\r\n        var that = this;\r\n        reader.addEventListener(\"load\", function* () {\r\n          yield put(addImage(reader.result))\r\n        }, false);\r\n        reader.readAsDataURL(step.values.image);\r\n      }\r\n    }\r\n\r\n  } catch (e) {\r\n    console.log(\"ERROR\", e);\r\n  }\r\n}\r\nexport default function* procedureSagas() {\r\n  yield takeEvery(ADD_STEP_REQUEST, createStepSaga);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}