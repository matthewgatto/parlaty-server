{"ast":null,"code":"import { createStore, applyMiddleware, combineReducers } from 'redux';\nimport createSagaMiddleware from 'redux-saga';\nimport form from './form';\nimport procedure from './procedure';\nimport user from './user';\nimport rootSaga from '../sagas';\nvar sagaMiddleware = createSagaMiddleware();\n\nfunction getPreloadedState() {\n  var preloadedState = {};\n  var user = {\n    \"auth_token\": \"QRKAxpKa79CuaFyWCSrYe5rNakLqeXLsyJap\",\n    \"auth_expiration\": \"1565372786\",\n    \"id\": 8,\n    \"email\": \"jakedthorn@gmail.com\",\n    \"first_name\": \"Jake\",\n    \"last_name\": \"Thornton\",\n    \"role_id\": 1,\n    \"phone\": null,\n    \"title\": \"Test\",\n    \"about_me\": \"Test\",\n    \"distributor_id\": null,\n    \"salon_id\": null,\n    \"career_kind_id\": 5,\n    \"approved\": true,\n    \"can_edit\": true,\n    \"agreed_to_terms\": true,\n    \"communication_preferred\": \"email\",\n    \"avatar\": \"https://kmstorage.jmg.mn/km-dev/users/avatars/8/medium/data?1561396540\",\n    \"role\": {\n      \"id\": 1,\n      \"name\": \"Super Admin\",\n      \"url\": \"https://kevinmurphy.jmg.mn/api/roles/1.json\"\n    },\n    \"url\": \"https://kevinmurphy.jmg.mn/api/users/8.json\" //localStorage.getItem('user');\n\n  };\n\n  if (user) {\n    var userObj =\n    /*JSON.parse(*/\n    user\n    /*)*/\n    ;\n\n    if (userObj.auth_token && userObj.auth_expiration && userObj.auth_expiration > Date.now() / 1000) {\n      preloadedState.user = userObj;\n      API.setToken(userObj.auth_token);\n    } else {\n      localStorage.removeItem('user');\n      window.location.href = \"\".concat(process.env.BASEURL, \"/saml/login.json\");\n    }\n  }\n\n  return preloadedState;\n}\n\nvar store = createStore(combineReducers({\n  form: form,\n  procedure: procedure,\n  user: user\n}), applyMiddleware(sagaMiddleware));\nsagaMiddleware.run(rootSaga);\nexport default store;","map":{"version":3,"sources":["C:\\Users\\Jake\\Documents\\Repositories\\parlaty\\app\\javascript\\src\\store\\index.js"],"names":["createStore","applyMiddleware","combineReducers","createSagaMiddleware","form","procedure","user","rootSaga","sagaMiddleware","getPreloadedState","preloadedState","userObj","auth_token","auth_expiration","Date","now","API","setToken","localStorage","removeItem","window","location","href","process","env","BASEURL","store","run"],"mappings":"AAAA,SAASA,WAAT,EAAsBC,eAAtB,EAAuCC,eAAvC,QAA8D,OAA9D;AACA,OAAOC,oBAAP,MAAiC,YAAjC;AACA,OAAOC,IAAP,MAAiB,QAAjB;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,OAAOC,IAAP,MAAiB,QAAjB;AACA,OAAOC,QAAP,MAAqB,UAArB;AAEA,IAAMC,cAAc,GAAGL,oBAAoB,EAA3C;;AAEA,SAASM,iBAAT,GAA4B;AAC1B,MAAIC,cAAc,GAAG,EAArB;AACA,MAAIJ,IAAI,GAAG;AAAC,kBAAa,sCAAd;AAAqD,uBAAkB,YAAvE;AAAoF,UAAK,CAAzF;AAA2F,aAAQ,sBAAnG;AAA0H,kBAAa,MAAvI;AAA8I,iBAAY,UAA1J;AAAqK,eAAU,CAA/K;AAAiL,aAAQ,IAAzL;AAA8L,aAAQ,MAAtM;AAA6M,gBAAW,MAAxN;AAA+N,sBAAiB,IAAhP;AAAqP,gBAAW,IAAhQ;AAAqQ,sBAAiB,CAAtR;AAAwR,gBAAW,IAAnS;AAAwS,gBAAW,IAAnT;AAAwT,uBAAkB,IAA1U;AAA+U,+BAA0B,OAAzW;AAAiX,cAAS,wEAA1X;AAAmc,YAAO;AAAC,YAAK,CAAN;AAAQ,cAAO,aAAf;AAA6B,aAAM;AAAnC,KAA1c;AAA4hB,WAAM,6CAAliB,CAAglB;;AAAhlB,GAAX;;AACA,MAAGA,IAAH,EAAQ;AACN,QAAIK,OAAO;AAAG;AAAeL,IAAAA;AAAI;AAAjC;;AACA,QAAGK,OAAO,CAACC,UAAR,IAAsBD,OAAO,CAACE,eAA9B,IAAkDF,OAAO,CAACE,eAAR,GAA0BC,IAAI,CAACC,GAAL,KAAW,IAA1F,EAAgG;AAC9FL,MAAAA,cAAc,CAACJ,IAAf,GAAsBK,OAAtB;AACAK,MAAAA,GAAG,CAACC,QAAJ,CAAaN,OAAO,CAACC,UAArB;AACD,KAHD,MAGO;AACLM,MAAAA,YAAY,CAACC,UAAb,CAAwB,MAAxB;AACAC,MAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,aAA0BC,OAAO,CAACC,GAAR,CAAYC,OAAtC;AACD;AACF;;AACD,SAAOf,cAAP;AACD;;AAED,IAAMgB,KAAK,GAAG1B,WAAW,CACvBE,eAAe,CAAC;AACdE,EAAAA,IAAI,EAAJA,IADc;AAEdC,EAAAA,SAAS,EAATA,SAFc;AAGdC,EAAAA,IAAI,EAAJA;AAHc,CAAD,CADQ,EAMvBL,eAAe,CAACO,cAAD,CANQ,CAAzB;AASAA,cAAc,CAACmB,GAAf,CAAmBpB,QAAnB;AAEA,eAAemB,KAAf","sourcesContent":["import { createStore, applyMiddleware, combineReducers } from 'redux';\r\nimport createSagaMiddleware from 'redux-saga';\r\nimport form from './form';\r\nimport procedure from './procedure';\r\nimport user from './user';\r\nimport rootSaga from '../sagas';\r\n\r\nconst sagaMiddleware = createSagaMiddleware();\r\n\r\nfunction getPreloadedState(){\r\n  let preloadedState = {};\r\n  let user = {\"auth_token\":\"QRKAxpKa79CuaFyWCSrYe5rNakLqeXLsyJap\",\"auth_expiration\":\"1565372786\",\"id\":8,\"email\":\"jakedthorn@gmail.com\",\"first_name\":\"Jake\",\"last_name\":\"Thornton\",\"role_id\":1,\"phone\":null,\"title\":\"Test\",\"about_me\":\"Test\",\"distributor_id\":null,\"salon_id\":null,\"career_kind_id\":5,\"approved\":true,\"can_edit\":true,\"agreed_to_terms\":true,\"communication_preferred\":\"email\",\"avatar\":\"https://kmstorage.jmg.mn/km-dev/users/avatars/8/medium/data?1561396540\",\"role\":{\"id\":1,\"name\":\"Super Admin\",\"url\":\"https://kevinmurphy.jmg.mn/api/roles/1.json\"},\"url\":\"https://kevinmurphy.jmg.mn/api/users/8.json\"}//localStorage.getItem('user');\r\n  if(user){\r\n    let userObj = /*JSON.parse(*/user/*)*/;\r\n    if(userObj.auth_token && userObj.auth_expiration && (userObj.auth_expiration > Date.now()/1000)){\r\n      preloadedState.user = userObj;\r\n      API.setToken(userObj.auth_token)\r\n    } else {\r\n      localStorage.removeItem('user');\r\n      window.location.href = `${process.env.BASEURL}/saml/login.json`;\r\n    }\r\n  }\r\n  return preloadedState;\r\n}\r\n\r\nconst store = createStore(\r\n  combineReducers({\r\n    form,\r\n    procedure,\r\n    user\r\n  }),\r\n  applyMiddleware(sagaMiddleware)\r\n);\r\n\r\nsagaMiddleware.run(rootSaga);\r\n\r\nexport default store;\r\n"]},"metadata":{},"sourceType":"module"}